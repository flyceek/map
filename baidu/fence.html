<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<title>百度地图围栏</title>
	<script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.9.1/jquery.js"></script>
	<!-- <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=xMy5qWGHtUnF7wHjxeAw3z2PGI6lr7vG"></script> -->
	<script type="text/javascript" src="https://api.map.baidu.com/api?type=webgl&v=1.0&ak=xMy5qWGHtUnF7wHjxeAw3z2PGI6lr7vG"></script>
	<!-- <script type="text/javascript" src="https://api.map.baidu.com/getscript?type=webgl&v=1.0&ak=xMy5qWGHtUnF7wHjxeAw3z2PGI6lr7vG"></script> -->
	<script type="text/javascript" src="https://api.map.baidu.com/api?type=subway&v=1.0&ak=xMy5qWGHtUnF7wHjxeAw3z2PGI6lr7vG"></script>
<!-- 	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=xMy5qWGHtUnF7wHjxeAw3z2PGI6lr7vG"></script>
	<script type="text/javascript" src="http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.js"></script>
	<link rel="stylesheet" href="//api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.css" /> -->
</head>
<body>
	<!--百度地图容器-->
	<div style="width:100%;height:100%;" id="map"></div>
</body>
<script type="text/javascript">
	function calculateCenter(pointArray) {
	    var total = pointArray.length;
	    var X = 0, Y = 0, Z = 0;
	    pointArray.forEach(function (lnglat) {
	        var lng = lnglat.lng * Math.PI / 180;
	        var lat = lnglat.lat * Math.PI / 180;
	        var x, y, z;
	        x = Math.cos(lat) * Math.cos(lng);
	        y = Math.cos(lat) * Math.sin(lng);
	        z = Math.sin(lat);
	        X += x;
	        Y += y;
	        Z += z;
	    });
	    X = X / total;
	    Y = Y / total;
	    Z = Z / total;

	    var Lng = Math.atan2(Y, X);
	    var Hyp = Math.sqrt(X * X + Y * Y);
	    var Lat = Math.atan2(Z, Hyp);
	    console.log(Lng, Lat, Hyp);
	    var c_lng=Lng * 180 / Math.PI;
	    var c_lat=Lat * 180 / Math.PI;
	    return new BMapGL.Point(c_lng,c_lat);
 	}

	function parsePointArray(pointArrayString){
		var pointArray=pointArrayString.split(";");
		console.log("pointArray length:" + pointArray.length);
		var bMapGLPointArray=[];
		$.each(pointArray,function(k,v){
			var pointLptArray=v.split(",");
			var lng=pointLptArray[0];
			var lat=pointLptArray[1];
			bMapGLPointArray.push(new BMapGL.Point(lng,lat));
		});
		return bMapGLPointArray;
	}

	function createPolygonByPointArrayString(pointArrayString,map){
		var pointArray=parsePointArray(pointArrayString);
		createPolygonByPointArray(pointArray,map);
	}

	function createPolygonByPointArray(pointArray,map){
		var polygon = new BMapGL.Polygon(pointArray, {
			strokeColor: "red",
			strokeWeight: 2,
			strokeOpacity: 0.5,
			fillColor: 'blue',
	        fillOpacity: 0.2
		}); //创建多边形
		map.addOverlay(polygon);
	}

	function createMarker(iconUrl,point,map){
		var centterPointMarker = new BMapGL.Marker(point);
		var centterPointMarkerIcon = new BMapGL.Icon(iconUrl, new BMapGL.Size(52, 26));
		map.addOverlay(centterPointMarker,{icon: centterPointMarkerIcon});
	}

	function createPolygon(pointArray,opts,map){
		var polygon = new BMapGL.Polygon(pointArray, {
			strokeColor: "red",
			strokeWeight: 2,
			strokeOpacity: 0.5,
			fillColor: opts.fillColor,
	        fillOpacity: 0.2
		});
		// polygon.enableEditing();
		map.addOverlay(polygon);
	}

	function createLabel(point,text,map){
		var label = new BMapGL.Label(text, {
		    position: point,
		    offset: new BMapGL.Size(20, -20)
		});
		label.setStyle({
		    color: 'blue',
		    borderRadius: '5px',
		    borderColor: '#ccc',
		    padding: '1px',
		    fontSize: '14px',
		    height: '20px',
		    lineHeight: '20px',
		    fontFamily: '微软雅黑'
		});
		map.addOverlay(label);
	}

	function createPolygonByPointJson(pointJson,map){
		pointJson.pointArray=parsePointArray(pointJson.raw);
		pointJson.centerPoint=calculateCenter(pointJson.pointArray);
		console.log(pointJson.label +" centerPoint lng :"+pointJson.centerPoint.lng+ ", lat : "+pointJson.centerPoint.lat);
		createPolygon(pointJson.pointArray,pointJson.polygonOpts,map);
		createMarker("https://weBMapGL0.bdimg.com/image/api/marker_red.png",pointJson.centerPoint,map);
		createLabel(pointJson.centerPoint,pointJson.label,map);
	}

	function createPolygonByPointJsonArray(pointJsonArray,map){
		$.each(pointJsonArray,function(k,v){
			createPolygonByPointJson(v,map);
		});
	}

	$(document).ready(function(){

		var pointJsonArray=[{
			label:"闵行区-航华",
			pointArray:[],
			centerPoint:BMapGL.Point(0, 0),
			polygonOpts:{
				fillColor: "blue"
			},
			raw:"121.39119815590662,31.17231475679163;121.38945827849663,31.1760530483226;121.38751243355001,31.180485538742047;121.38712330144233,31.1816450036196;121.38697805113283,31.183498947309594;121.38667304849706,31.186125327140996;121.38658156150149,31.186495382590792;121.38622255726463,31.187731251423127;121.38582602151386,31.188780359402866;121.38501720372342,31.188889006052516;121.38451348717116,31.18887363857718;121.38411669402706,31.188919571445332;121.3837199736375,31.18913685853903;121.38355977107518,31.18949139178451;121.38341441155553,31.19049489435399;121.3818581536021,31.19078829703567;121.38014858259305,31.192487991921073;121.37956114214128,31.19354458656531;121.3797443465166,31.1936073824986;121.38125505017085,31.194101692684843;121.38331537585681,31.19470261272735;121.38513951063679,31.19546375010142;121.38662730270062,31.195957881246635;121.38693259879996,31.195805181816656;121.38852738923266,31.196039800831237;121.39002314974101,31.196276604766826;121.39119070854538,31.196432934690208;121.39281630306995,31.19668880267624;121.39438794629442,31.19697498683898;121.39648679621737,31.197345378908338;121.39797484839288,31.197601377706373;121.3985927649926,31.19770449961134;121.40939069504938,31.197395974176445;121.41896749357245,31.197165967473122;121.41899049158317,31.196624296252992;121.4189599628482,31.196292428678454;121.41893717206732,31.19585380716429;121.41893687553598,31.195512205374946;121.4188988305045,31.194579761651454;121.41986042323839,31.19461832478147;121.41989102629135,31.193754203343392;121.41986809777627,31.192756403587985;121.42141705165594,31.193298707219675;121.42194360325743,31.1920074563626;121.42188258112948,31.191267543548182;121.42194387242824,31.190895614191806;121.42152379817368,31.19092802369602;121.42138653309902,31.18957570737298;121.42046349523773,31.189567725130917;121.42057022135995,31.188432942559096;121.41959323807866,31.188432733212686;121.41898288082864,31.188432286948643;121.41828093211907,31.18827784116917;121.41652573573137,31.18772036257477;121.41175598772267,31.186237020364945;121.40820018545087,31.18521552832789;121.40723882570127,31.184873754025368;121.40687982495159,31.184782248061957;121.40649093560543,31.18492905162831;121.40622386699894,31.185100447258144;121.40598701427227,31.18520726099551;121.40519347502637,31.185531177566336;121.40407933316705,31.185199153386353;121.40412533497286,31.184163498413106;121.40400309868905,31.183926969939666;121.4026904673975,31.183770066353876;121.40224799350412,31.183716591641865;121.40159921936696,31.183632494704188;121.40122534999716,31.183636154803523;121.40090496663166,31.18359259478738;121.40121007733904,31.182585235752015;121.40127892723639,31.182337378826627;121.40192762188997,31.18019569256931;121.4007980888901,31.17990358414625;121.40098094192714,31.178991756009452;121.39909642560816,31.17861408746016;121.39953110822908,31.17687629815699;121.399950808345,31.176973642880384;121.4004163941514,31.175218939352305;121.39803538719562,31.174423239426336;121.39517359323267,31.173442331508724;121.39130465657789,31.17220593387691;121.39119815590662,31.17231475679163"
		},{
			label:"闵行区-金虹桥",
			pointArray:[],
			centerPoint:BMapGL.Point(0, 0),
			polygonOpts:{
				fillColor: "blue"
			},
			raw:"121.3540256744221,31.184615939885973;121.35534735620426,31.18553999837022;121.35587314235411,31.185982028766237;121.35708965633145,31.186331731170487;121.35767726719945,31.186640739709105;121.358722273174,31.18692676219571;121.35989736366602,31.187375436430248;121.36152242117765,31.18786953150155;121.36446791309072,31.18886957103437;121.36471978166364,31.187696665911393;121.36519258275467,31.18470011488426;121.36549797871787,31.18334006010179;121.36655851669411,31.180637944428792;121.36889324397795,31.174829931565515;121.35979811961388,31.171042714803477;121.3562088346457,31.169611316738088;121.3540831931971,31.172770603925393;121.35306298956111,31.174380386212267;121.35249026248174,31.175215956940455;121.35147414729015,31.17653081449231;121.35094080136005,31.177191330046902;121.34631104231926,31.17518106373579;121.3458555592658,31.175722860514906;121.34497577036187,31.17674488698166;121.34434776845421,31.177578194963452;121.351513746561,31.182787192369688;121.3540256744221,31.184615939885973"
		},{
			label:"闵行区-吴泾",
			pointArray:[],
			centerPoint:BMapGL.Point(0, 0),
			polygonOpts:{
				fillColor: "blue"
			},
			raw:"121.48485286496982,31.057625457804455;121.4855929820035,31.05150861348577;121.48634052540868,31.048052666759414;121.48675260937534,31.044779712563425;121.48689735264638,31.042784674143036;121.48762981463136,31.038584802056903;121.48832389466304,31.03491914911697;121.48872849756498,31.033524920533853;121.4894991848489,31.03174728764863;121.4912081345051,31.028699359852023;121.4932605634328,31.02569747961736;121.49397029961814,31.02477616583562;121.49449628893308,31.02360156206756;121.49463388897942,31.023112955858462;121.49459571579345,31.02265723208285;121.49426774639734,31.02226228287102;121.49359622494906,31.021751070962353;121.49274949766195,31.021373389585133;121.49165831503508,31.021163835766355;121.49033823546995,31.02094616631247;121.48679828574312,31.02086952498666;121.48421915913934,31.020798756717163;121.48294508617074,31.020681933889758;121.48165550879062,31.020395610623897;121.48021337966067,31.01990916519803;121.47723787224075,31.01886336388578;121.47275114257319,31.017222192911966;121.4707521125118,31.01653324314748;121.47003498324116,31.01637857281994;121.46870746021057,31.01599335431683;121.46786024470723,31.01582112994542;121.46635708297383,31.01570447852395;121.4637858538764,31.015605203465974;121.46196954718098,31.015635426389466;121.45916140271324,31.01570364849238;121.45632269928429,31.01581213608683;121.45471258010325,31.01561544345326;121.45359853386736,31.01623509034696;121.45208748715756,31.01960911653671;121.45093526849661,31.022145726078563;121.44985921489412,31.02425120450802;121.4484398984261,31.027066562303656;121.44723428844678,31.029681264484967;121.44642535198632,31.031800483371214;121.44261690886982,31.039412338116428;121.44060226046544,31.044827208612844;121.43772530926164,31.053163857831617;121.43936585746414,31.05406231329859;121.4384272808255,31.055406874413904;121.4333598148861,31.066411400838916;121.43253558460027,31.068761258811897;121.4323907897833,31.069814260885348;121.4315817952746,31.072720545231476;121.43069657844516,31.07608498242321;121.43300105452339,31.07702005178235;121.4344891336466,31.07769365468002;121.43548896179418,31.075853164093758;121.43648862079672,31.073410056884477;121.43937311652664,31.074345078382347;121.44087666601236,31.070944410326195;121.44239528215174,31.07132408295382;121.44461614989365,31.07171710063125;121.44863771185499,31.072522540029894;121.44697395360396,31.078862259527156;121.45919909347062,31.078727723045958;121.46087793091827,31.078758676278643;121.45924491674974,31.083324462568058;121.45697074096401,31.083324332360057;121.4569173402936,31.08512276349484;121.45774922888063,31.085275653708578;121.4580851927645,31.085832625564898;121.45974103464947,31.086359145155782;121.4601911174433,31.086065681842133;121.46119821767854,31.085865451206175;121.46177073343569,31.08538478735497;121.4629003164621,31.085400114829664;121.4633505724712,31.08583339937117;121.46430431619233,31.086190284704106;121.46554794673584,31.086484229566288;121.46593716949917,31.086995416813764;121.46637214494642,31.087474299876078;121.46698274492313,31.087565670410346;121.46529623117624,31.09421464028066;121.4630298748567,31.10143574223413;121.46206083345264,31.104712317416052;121.4611144038196,31.10747616083367;121.4623661245807,31.107596094249168;121.46248054015909,31.107148190886917;121.46476211518114,31.10758906157281;121.46492991176709,31.107043572070225;121.46560900632825,31.10719045077339;121.46547192448939,31.107634860486826;121.4670285864517,31.10790623036624;121.46904278616722,31.103921995809507;121.47040883203394,31.10172686757864;121.47234676110914,31.098944248802233;121.4740789469815,31.09535688111912;121.47501003403653,31.088738433843826;121.47788651177262,31.07748182333897;121.48485286496982,31.057625457804455"
		},{
			label:"浦东区-唐镇",
			pointArray:[],
			centerPoint:BMapGL.Point(0, 0),
			polygonOpts:{
				fillColor: "blue"
			},
			raw:"121.64636703251156,31.201109923220287;121.64603964399946,31.201658056923364;121.6456555327754,31.202224596183914;121.64437073485648,31.203695833;121.64282228423248,31.206320398525847;121.64087708147225,31.209757499072065;121.64008571645782,31.21116511805701;121.63977646408173,31.211820096900826;121.63945054287171,31.213177694162475;121.63933621349648,31.214713137138222;121.6392687556237,31.21737240955324;121.64481190363988,31.217386143794336;121.6446297227524,31.221130741684316;121.64617638559368,31.22155132537998;121.64784111557361,31.22212495554789;121.65072082938968,31.224008910547383;121.65067937592542,31.226230390011683;121.6506916440525,31.22832664720009;121.65112155972919,31.230129939064746;121.65080613843794,31.231966158204084;121.64244844242614,31.23027639825413;121.63849707907312,31.22947387631196;121.6380926706249,31.23138144469422;121.63819935300677,31.233511874390498;121.63919858120443,31.237210021148652;121.63952670235334,31.238846356731568;121.63955734988099,31.24092913302321;121.6409228101471,31.241075937699343;121.6423109075639,31.24116910328717;121.6437832321172,31.241315851708595;121.6452705356943,31.24170099959388;121.64791780842103,31.242126092460254;121.6509312354104,31.24322798298731;121.6559163284602,31.244509927364867;121.65600399720118,31.244649399523666;121.65585870329085,31.24592793358033;121.65541387966238,31.248717961166246;121.65633583344543,31.248974332809098;121.66060148719401,31.250322803593363;121.66390688250335,31.251410978275466;121.6666614095891,31.252515493652417;121.66682144106133,31.251642095319546;121.6739549110161,31.253904006136725;121.68156137275963,31.25634871826658;121.68490301374707,31.262197224001802;121.68965607332898,31.26170523610857;121.69060593309233,31.259395454758877;121.69257242231735,31.25394343517524;121.6941519579357,31.250029144650842;121.69588273784537,31.245919570624736;121.69766593815946,31.241701108901292;121.69277701919735,31.241183070566663;121.69357815993719,31.236288623483958;121.69397440197542,31.233124094853487;121.69420361277886,31.23219731978969;121.69464579641712,31.230908000565798;121.69537851914156,31.228769581697165;121.6955998707065,31.227573945345615;121.69583630289067,31.225681672112273;121.69615652726014,31.223226913664213;121.69666786837804,31.220997521661204;121.6971790275203,31.21903674167845;121.69780487040425,31.217352328118157;121.69872775201775,31.215306048407466;121.6994375298862,31.214008895467284;121.70020812067872,31.21277298772533;121.7009559408838,31.211822919260552;121.70160447596973,31.21085805896974;121.70185627044786,31.21001699034535;121.69877379962273,31.20940800855795;121.69343247912212,31.208466081234377;121.68888514600475,31.207638355528157;121.68246095707259,31.20640474274526;121.67326007929671,31.20456679673959;121.66299504351872,31.20262672719405;121.6533513793117,31.200553336722923;121.64734438081746,31.199289950573863;121.64636703251156,31.201109923220287"
		},{
			label:"浦东区-张江",
			pointArray:[],
			centerPoint:BMapGL.Point(0, 0),
			polygonOpts:{
				fillColor: "#223344"
			},
			raw:"121.63188902600392,31.245704562011827;121.63189583165925,31.24761568187825;121.63005947757401,31.247643253196664;121.62597105863094,31.247629118893823;121.62405510102859,31.247675844349985;121.62322476134193,31.247513395125196;121.62101254259092,31.2469666686728;121.61389131624556,31.244805598373283;121.6096336245238,31.243537278309;121.61018854566278,31.242815015138586;121.61035641203075,31.24239516633937;121.6107761321469,31.241868709848042;121.61123365025865,31.241332897797502;121.61142431130328,31.240951094299895;121.61163016587855,31.240710972858828;121.61201157826372,31.24044930020532;121.61243132914495,31.24021653221016;121.6125990483241,31.239915196543738;121.61262194606658,31.239743745374803;121.61256864160025,31.239556446473696;121.61231697100331,31.239121605778738;121.61235512751955,31.238808898118975;121.61300333530758,31.2368709439142;121.61309506933951,31.23524953389233;121.60385774098377,31.23318189565672;121.59493314609948,31.23154817942878;121.58280535017086,31.231702079236495;121.58027309629401,31.231177972045256;121.57761840936,31.2301599110637;121.5824545933764,31.210217600842594;121.58594039342259,31.196194076428167;121.58761865860444,31.190015769677636;121.58892289296818,31.184980231430767;121.5904026325389,31.179982712700305;121.59231744036867,31.175580378966202;121.59500208611014,31.17666167331033;121.59748873269122,31.17734796579809;121.6021416375103,31.17821350953052;121.60526895094732,31.1787908889165;121.6077633031373,31.17932492671401;121.60907527689305,31.179709940819567;121.60912861664937,31.179540128727176;121.60926596292316,31.178552236653587;121.60953297497177,31.17757926547798;121.6098378760965,31.176667648111867;121.61009733648925,31.175872045594176;121.61034156666948,31.175269311050137;121.61087522804227,31.174279540100855;121.61351466831272,31.16936759125864;121.6142618048278,31.167891146410202;121.61434598194325,31.166986969329677;121.61427721703454,31.16625460844988;121.61394937741187,31.16569016594825;121.61359055658565,31.165041829853273;121.6134382289384,31.164454283857786;121.61340780470643,31.16388996041631;121.61350692677617,31.163309702322145;121.6141168100805,31.161425127774713;121.61452873452059,31.16023712267003;121.61497578787441,31.159021492123493;121.62492731047799,31.160754504997662;121.63160221113034,31.16197857892739;121.63639393758453,31.162863535210548;121.64162252825396,31.163858223453033;121.64485115303673,31.16447143344457;121.6458046902784,31.1647267027041;121.64616650987382,31.163615960109013;121.6465813639046,31.16371449511409;121.64938238599284,31.164982096046344;121.65103770065173,31.16576237691366;121.65279970085614,31.16664174824771;121.65390596645841,31.167297666402376;121.65400844056434,31.166939954790195;121.65434421664669,31.167035591879145;121.65523335948566,31.167175737859385;121.65621756865221,31.16718322795704;121.65699555396816,31.166031035235715;121.65760582379382,31.16514414634113;121.65808031654149,31.164317571808926;121.65912395593736,31.164772268140972;121.66097766846104,31.165529515396884;121.66261791046885,31.165993208134477;121.66152723573731,31.168055186845336;121.66232794026045,31.169004904560072;121.66061154438935,31.17210411047266;121.66029099786043,31.172575226140818;121.65951303782823,31.17391817487485;121.6593453664964,31.174188966940967;121.65913154850956,31.1743433208001;121.65904002404393,31.174465546374442;121.6572777624444,31.176445452567997;121.65681994211745,31.17631378054369;121.65656837327516,31.176799947340946;121.65594300864092,31.177942745060513;121.65599621489412,31.178198221802816;121.65599623367208,31.17835284898296;121.65545466251332,31.179596302657302;121.6552029312746,31.180191279214075;121.65524104032943,31.180399268809204;121.65545433154993,31.18056151492407;121.65666754499061,31.181002036232073;121.65672075974825,31.18114114182592;121.66048918642512,31.18274733742034;121.66282386359313,31.183750586960254;121.66483788649377,31.18463933098605;121.66582926659775,31.18507250172705;121.6673540947529,31.185646283913286;121.67057293876957,31.18682131942415;121.6721461903637,31.187265677475573;121.67111636872681,31.190956321490475;121.67058255504504,31.1928179632856;121.67065096095548,31.192848503243475;121.67146718090632,31.193058115777603;121.67155106033762,31.1931571942848;121.67075021043684,31.19587540521235;121.67019314408944,31.197967816155675;121.66985724869322,31.199165465124192;121.6694304828323,31.20023932386345;121.66918811437688,31.200822036629734;121.66850267554577,31.203624735996485;121.66279323059625,31.202509110566435;121.65382221692252,31.200601614218225;121.64735351221636,31.19923611136499;121.64565224415723,31.202177602592666;121.64432799882273,31.20365121906602;121.64289531235147,31.206110898446394;121.64162936777723,31.208338683249135;121.64115496658285,31.209178873440592;121.64073153615965,31.209938757134356;121.64012555628855,31.210981651750533;121.6397739181109,31.21170393602815;121.63958771840534,31.212392484491623;121.6394513377765,31.212873542954988;121.63934896623039,31.21358184976565;121.63929904639393,31.214288340149164;121.63928879468129,31.21521263101554;121.63923309526523,31.21741865639473;121.64474846883327,31.21745488111321;121.64456922620516,31.221166700453026;121.64751372231903,31.222032520319367;121.65067951955312,31.22400815437221;121.65055897394173,31.22572872593862;121.65060308610006,31.228330182206975;121.65103786038574,31.23012134414539;121.6507478079885,31.231912189388147;121.6384662129435,31.229382378420294;121.63837708049259,31.229788049108738;121.63817257440805,31.230704918531476;121.63804584576546,31.231270525635768;121.63807334361047,31.23209009338587;121.63809863713736,31.2328762621218;121.63817314124898,31.233757362947088;121.63899441606745,31.236743779801042;121.63946558456281,31.238842369257576;121.6394916125694,31.241008904764826;121.63962262012335,31.245020256544425;121.63620917589432,31.24490620582693;121.63187512104754,31.24477063053475;121.63188902600392,31.245704562011827"
		},{
			label:"浦东区-合庆",
			pointArray:[],
			centerPoint:BMapGL.Point(0, 0),
			polygonOpts:{
				fillColor: "#773399"
			},
			raw:"121.7552319326787,31.264728329040395;121.75950541228389,31.260099839920105;121.76194729220063,31.25647233467934;121.76545733325108,31.250808268602494;121.76829640821876,31.24604622394233;121.76535099519766,31.244672183445;121.76665571358598,31.24415563341114;121.76784614008277,31.24242577632501;121.77083725693461,31.237587629424954;121.77289747384565,31.234553382925903;121.7747901660414,31.231536702340264;121.77559127000853,31.23024745423653;121.77582035072336,31.22913550115082;121.77581245695234,31.22824849683132;121.7752555654346,31.226966789704246;121.77465270246567,31.22621703934653;121.7734242852166,31.2253756623517;121.77289754037707,31.22525907475265;121.77321066241241,31.224248147513343;121.77448483936728,31.2221409975852;121.77509502673098,31.220405422820537;121.775813380208,31.219061540833;121.77581249796957,31.218969547071335;121.77746842532036,31.218823110066385;121.77848304563094,31.21872995571278;121.77928440384893,31.21893787455082;121.78153540552847,31.21935625648395;121.78344287741334,31.219263041963455;121.7845405647767,31.218912442784934;121.78409170560722,31.21885488297093;121.78193031469884,31.218577823445404;121.77966222015645,31.21779899473019;121.77706426022412,31.216775016729088;121.77574100550324,31.21610356665961;121.77514613809461,31.21587536320355;121.77169821348983,31.21546439067572;121.76757547713537,31.215110438129347;121.76649514477901,31.214865114851676;121.76482451909813,31.214511449226823;121.75602617370082,31.213499418667187;121.7493719906964,31.212703124645508;121.74664784768191,31.212439898153228;121.74567087387831,31.212409400270396;121.7437097843752,31.212462528527578;121.73622372862381,31.21309502032802;121.73341541327423,31.21331044376074;121.73201908756552,31.213117548136367;121.72571484877231,31.21077298072933;121.71593389535431,31.207703406436586;121.71302686892628,31.20680621105459;121.7111574299359,31.20636163938964;121.70864706705879,31.211108662026778;121.70193246917417,31.209990162674583;121.7017723756269,31.210518493227074;121.70155100077511,31.211012633837846;121.70130675129374,31.211491307801978;121.7009025454395,31.21205561328622;121.70005551463031,31.213129807063783;121.69954420425174,31.214016565859886;121.69897977788612,31.215098013098885;121.69812505258807,31.216726704822573;121.69772064931655,31.21779874675291;121.69722476852532,31.21909759516271;121.69690436525252,31.220485926828765;121.696194971101,31.2233893438876;121.69579796774808,31.22675366880998;121.69545465794953,31.22880799038678;121.69502747428686,31.230082080254775;121.69418818010351,31.232483639195127;121.69404318558688,31.233263568150505;121.69368468796947,31.23611887570185;121.69285962881214,31.241137525875907;121.69778210319694,31.24163884511576;121.69254087857966,31.254310571419534;121.69745409746936,31.25533723993668;121.69821723498507,31.255491515826805;121.69880472653573,31.25565413145836;121.7029002881425,31.2567219507845;121.70738069714676,31.25763066293741;121.71098950894466,31.258369229208046;121.71598728076965,31.259390746029645;121.71964218689618,31.259925428484443;121.72357960160475,31.260534775779853;121.73064517039734,31.261600075392767;121.73494129660256,31.262327134230503;121.73540691507104,31.26239590507236;121.73770355955259,31.262489751428177;121.74583796880232,31.26427935639635;121.74683773298206,31.263663478607537;121.74915776702893,31.262135540886376;121.7551327578618,31.264829473188172;121.7552319326787,31.264728329040395"
		}];

		var mapLevel=15;
		var map = new BMapGL.Map("map");

		createPolygonByPointJsonArray(pointJsonArray,map);

		map.centerAndZoom(pointJsonArray[4].centerPoint, mapLevel);
		map.addControl(new BMapGL.MapTypeControl()); //设置地图的类型控件
		map.enableScrollWheelZoom(true); //滚轮滑动缩放地图

		//鼠标点击获取坐标
		map.addEventListener("click", function (e) {
			var lng = e.point.lng;
			var lat = e.point.lat;
			console.log("lng: " + lng+", lat: " + lat);
			var myPoint = new BMapGL.Point(lng, lat);
		});

	});
</script>
</html>
